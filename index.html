<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ranking Your Friends</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="app-header" id="app-header">
        <h1 data-i18n="app.title">Ranking Your Friends</h1>
        <p class="subtitle" data-i18n="app.subtitle">
          A playful party game: pick juicy questions, rank each other, and reveal the funniest results
          round by round.
        </p>
        <p class="muted" data-i18n="app.intro">
          No accounts, no logins. The host locks the game, players send a short secret code,
          and the host runs a big-screen style reveal.
        </p>
        <div class="card demo-card">
          <h2 data-i18n="demo.title">Try the demo reveal</h2>
          <p class="muted" data-i18n="demo.description">
            Jump into a filled-out game with six players and five questions to see the reveal flow
            end to end.
          </p>
          <a
            id="demo-reveal-link"
            class="btn primary"
            data-i18n="demo.cta"
            target="_blank"
            rel="noopener"
          >
            Open demo reveal
          </a>
        </div>
        <div class="language">
          <label for="language-select" data-i18n="language.label">Language</label>
          <select id="language-select"></select>
        </div>
        <nav id="nav-bar" class="nav">
          <button id="nav-setup" class="nav-btn" data-i18n="nav.setup">1. Setup</button>
          <button id="nav-host" class="nav-btn" data-i18n="nav.host">2. Collect Codes</button>
          <button id="nav-inspiration" class="nav-btn" data-i18n="nav.inspiration">
            3. Inspiration
          </button>
        </nav>
      </header>

      <section id="view-setup" class="view">
        <h2 data-i18n="setup.title">Setup</h2>
        <p class="muted" data-i18n="setup.description">
          Add players and questions. When you lock the game, the setup freezes and a share link
          is generated for your players.
        </p>
        <div class="card">
          <label class="field">
            <span data-i18n="setup.gameTitle">Game title</span>
            <input
              id="game-title"
              type="text"
              placeholder="Friday night rankings"
              data-i18n-placeholder="setup.gameTitlePlaceholder"
            />
          </label>
        </div>

        <div class="grid">
          <div class="card">
            <h3 data-i18n="setup.players">Players</h3>
            <div id="players-list" class="list"></div>
            <button id="add-player" class="btn" data-i18n="labels.addPlayer">Add player</button>
          </div>
          <div class="card">
            <h3 data-i18n="setup.questions">Questions</h3>
            <div id="questions-list" class="list"></div>
            <button id="add-question" class="btn" data-i18n="labels.addQuestion">Add question</button>
          </div>
        </div>

        <div class="card">
          <div class="reveal-scoring">
            <h3 data-i18n="setup.chooseScoring">Choose scoring</h3>
            <div class="scoring-options">
              <label class="scoring-option" for="scoring-simple">
                <input id="scoring-simple" type="radio" name="scoring" value="simple" />
                <div>
                  <span class="scoring-title" data-i18n="setup.simpleTitle">
                    Simple (exact ranks)
                  </span>
                  <p class="muted" data-i18n="setup.simpleDesc">
                    Score 1 point for every player placed in the exact position (e.g. John is
                    fourth).
                  </p>
                  <ul class="scoring-proscons">
                    <li>
                      <strong data-i18n="setup.simpleProsLabel">Pros:</strong>
                      <span data-i18n="setup.simplePros">
                        easy to explain and highlights perfect hits.
                      </span>
                    </li>
                    <li>
                      <strong data-i18n="setup.simpleConsLabel">Cons:</strong>
                      <span data-i18n="setup.simpleCons">near-misses get no credit.</span>
                    </li>
                  </ul>
                </div>
              </label>
              <label class="scoring-option" for="scoring-weighted">
                <input id="scoring-weighted" type="radio" name="scoring" value="weighted" />
                <div>
                  <span class="scoring-title" data-i18n="setup.weightedTitle">
                    Weighted (distance-based)
                  </span>
                  <p class="muted" data-i18n="setup.weightedDesc">
                    Score more points when your ranking is closer to the group consensus and fewer
                    points when you are far off.
                  </p>
                  <ul class="scoring-proscons">
                    <li>
                      <strong data-i18n="setup.weightedProsLabel">Pros:</strong>
                      <span data-i18n="setup.weightedPros">
                        rewards close guesses and keeps scores tight.
                      </span>
                    </li>
                    <li>
                      <strong data-i18n="setup.weightedConsLabel">Cons:</strong>
                      <span data-i18n="setup.weightedCons">
                        needs a quick explanation before playing.
                      </span>
                    </li>
                  </ul>
                </div>
              </label>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <div>
              <h3 data-i18n="setup.suggestedTitle">Suggested questions</h3>
              <p class="muted" data-i18n="setup.suggestedHint">
                Pick from a quick starter list or jump to the inspiration page for more ideas.
              </p>
            </div>
            <div class="actions">
              <button id="add-top-questions" class="btn" data-i18n="setup.suggestedAddTop">
                Add top 10
              </button>
              <button id="open-inspiration" class="btn" data-i18n="setup.suggestedMore">
                More inspiration
              </button>
            </div>
          </div>
          <div id="suggested-questions" class="pill-grid"></div>
        </div>

        <div class="card">
          <h3 data-i18n="setup.lockTitle">Lock the game</h3>
          <p class="muted" data-i18n="setup.lockDescription">
            Locking freezes players and questions, and generates the share link.
          </p>
          <div class="actions">
            <button id="finalize-game" class="btn primary" data-i18n="setup.lockButton">
              Lock game & create link
            </button>
            <button id="go-host" class="btn" data-i18n="setup.goHost">Go to collect codes</button>
          </div>
          <p id="setup-error" class="error hidden"></p>
        </div>

        <div id="finalized-panel" class="card hidden">
          <h3 data-i18n="setup.shareTitle">Share link</h3>
          <div class="share-row">
            <input id="share-url" type="text" readonly />
            <button id="copy-share" class="btn" data-i18n="labels.copy">Copy</button>
          </div>
          <p class="muted" data-i18n="setup.shareHint">Send this link to each player.</p>
          <h4 data-i18n="setup.gameCode">Game code (backup)</h4>
          <textarea id="game-code" class="code-box" readonly></textarea>
        </div>
      </section>

      <section id="view-player" class="view hidden">
        <h2 data-i18n="player.title">Player</h2>
        <p class="muted" data-i18n="player.description">
          Pick your name, rank everyone for each question, then copy your secret code.
        </p>
        <div id="player-step-identity" class="card">
          <label class="field">
            <span data-i18n="player.selectName">Select your name</span>
            <select id="player-select"></select>
          </label>
          <div class="actions">
            <button id="player-confirm" class="btn primary" data-i18n="player.start" disabled>
              Start
            </button>
          </div>
        </div>

        <div id="player-step-questions" class="card hidden">
          <div class="progress">
            <span id="player-progress">0 / 0</span>
          </div>
          <div id="player-questions"></div>
          <div class="actions">
            <button id="next-question" class="btn" data-i18n="player.nextQuestion">
              Next question
            </button>
            <button id="player-finish" class="btn primary" data-i18n="player.finish">
              Finish & get code
            </button>
          </div>
        </div>

        <div id="player-step-submit" class="card hidden">
          <h3 data-i18n="player.thanks">Thanks! Send this to your host</h3>
          <p class="muted" data-i18n="player.submitHint">
            Copy your secret code below and send it via WhatsApp or email.
          </p>
          <div class="submission-line" id="submission-line-panel">
            <label class="field">
              <span data-i18n="player.secretCode">Your secret code</span>
              <input id="submission-line" type="text" readonly />
            </label>
            <div class="actions">
              <button id="copy-submission-line" class="btn primary" data-i18n="player.copyCode">
                Copy code
              </button>
            </div>
          </div>
          <p id="player-error" class="error hidden"></p>
        </div>
      </section>

      <section id="view-host" class="view hidden">
        <h2 data-i18n="host.title">Collect Codes</h2>
        <p class="muted" data-i18n="host.description">
          Paste each player's code below (one per line). When all are in, start the reveal.
        </p>
        <div class="card">
          <h3 data-i18n="host.pasteTitle">Paste codes</h3>
          <p class="muted">
            <span data-i18n="host.pasteHint">Each line: name:code</span>
          </p>
          <textarea
            id="import-text"
            class="code-box"
            placeholder="alice:abc123&#10;bob:def456"
            data-i18n-placeholder="host.pastePlaceholder"
          ></textarea>
          <div class="actions">
            <button id="import-submit" class="btn primary" data-i18n="host.import">
              Import lines
            </button>
          </div>
          <p id="import-error" class="error hidden"></p>
        </div>
        <div class="card">
          <h3 data-i18n="host.status">Submission status</h3>
          <div id="submission-status" class="list"></div>
        </div>
        <div class="actions">
          <button id="start-reveal" class="btn primary" data-i18n="host.startReveal" disabled>
            Generate game night link
          </button>
        </div>

        <div id="reveal-link-panel" class="card hidden">
          <h3 data-i18n="host.revealTitle">Game night link</h3>
          <p class="muted" data-i18n="host.revealHint">
            Open this on the big screen, or share as a QR code.
          </p>
          <div class="share-row">
            <input id="reveal-url" type="text" readonly />
            <button id="copy-reveal" class="btn" data-i18n="labels.copy">Copy</button>
          </div>
          <div class="qr-wrap">
            <canvas id="reveal-qr" width="220" height="220"></canvas>
          </div>
          <div class="actions">
            <button id="open-reveal" class="btn primary" data-i18n="host.openReveal">
              Open reveal
            </button>
          </div>
        </div>
      </section>

      <section id="view-reveal" class="view hidden">
        <h2 id="reveal-title">Reveal</h2>
        <div id="reveal-fullscreen" class="card reveal-fullscreen">
          <h3 data-i18n="reveal.readyTitle">Ready to present?</h3>
          <p class="muted" data-i18n="reveal.readyHint">Go fullscreen for the best vibe.</p>
          <button id="reveal-enter-fullscreen" class="btn primary" data-i18n="reveal.fullscreen">
            Go fullscreen
          </button>
          <button id="reveal-skip-fullscreen" class="btn" data-i18n="reveal.skipFullscreen">
            Continue without fullscreen
          </button>
        </div>

        <div id="reveal-stage" class="card reveal-stage">
          <div class="reveal-progress">
            <div class="reveal-progress-top">
              <span id="reveal-progress-text">Question 1 of 1</span>
            </div>
            <div class="reveal-progress-bar">
              <span id="reveal-progress-fill"></span>
            </div>
            <div id="reveal-progress-dots" class="reveal-progress-dots"></div>
          </div>
          <div id="reveal-prompt" class="reveal-prompt hidden">
            <h3 id="reveal-prompt-title">Presenter, come forward</h3>
            <p class="muted" id="reveal-presenter-line"></p>
          </div>
          <div id="reveal-question-panel" class="hidden">
            <h3 class="reveal-question" data-i18n="reveal.questionLabel">Question</h3>
            <p id="reveal-question-text" class="reveal-question-text"></p>
            <p class="muted reveal-presenter-note">
              <span data-i18n="reveal.presenterNote">Presenter:</span>
              <span id="reveal-presenter-label"></span>
            </p>
          </div>
          <div id="reveal-ranking-panel" class="hidden">
            <h3 id="reveal-ranking-title" class="reveal-question">Presenter vs group average</h3>
            <div class="reveal-columns">
              <span id="reveal-column-presenter">Presenter</span>
              <span data-i18n="labels.group">Group</span>
            </div>
            <ol id="round-reveal" class="leaderboard presenter-reveal"></ol>
          </div>
          <div id="reveal-roundscore-panel" class="hidden">
            <h3 class="reveal-question" data-i18n="reveal.roundScore">Round score</h3>
            <p class="muted score-explain" id="round-score-explain"></p>
            <ol id="round-leaderboard" class="leaderboard"></ol>
          </div>
          <div id="reveal-total-panel" class="hidden">
            <h3 class="reveal-question" data-i18n="reveal.totalScore">Total score</h3>
            <p class="muted score-explain" id="total-score-explain"></p>
            <ol id="total-leaderboard" class="leaderboard"></ol>
          </div>
          <div id="reveal-end-panel" class="hidden">
            <h3 class="reveal-question" data-i18n="reveal.endTitle">Finale</h3>
            <p class="muted" data-i18n="reveal.endIntro">
              Here's how the leaderboard evolved across the night.
            </p>
            <div class="reveal-podium">
              <div class="reveal-podium-header">
                <h4 data-i18n="reveal.podiumTitle">Podium time</h4>
                <p class="muted" data-i18n="reveal.podiumIntro">Top three take their bow.</p>
              </div>
              <ol id="reveal-podium" class="podium-grid"></ol>
            </div>
            <div id="reveal-score-chart" class="score-chart"></div>
            <div id="reveal-score-legend" class="score-legend"></div>
          </div>
          <div class="actions">
            <button id="reveal-prev" class="btn" data-i18n="reveal.back">Back</button>
            <button id="reveal-next" class="btn primary">Next</button>
          </div>
        </div>
      </section>

      <section id="view-inspiration" class="view hidden">
        <h2 data-i18n="inspiration.title">Question inspiration</h2>
        <p class="muted" data-i18n="inspiration.description">
          Browse categories and tap a question to add it to your game.
        </p>
        <div id="inspiration-groups" class="stack"></div>
      </section>
    </main>

    <script type="module" src="app.js"></script>
  </body>
</html>
